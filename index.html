<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <style>
        #start-screen { background: #181c20 !important; color: #e0e0e0 !important; }
    </style>
    <script>
        (function() {
            var isDark = false;
            try {
                isDark = localStorage.getItem('halcyon_town_dark_mode') === '1';
            } catch(e) {}
            if (!isDark) {
                document.write(
                    '<style>#start-screen { background: #fff !important; color: #222 !important; }</style>'
                );
            }
        })();
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>栖迟之墟 (Halcyon Town)</title>
    <script>
      (function() {
        var isDark = false;
        try {
          isDark = localStorage.getItem('halcyon_town_dark_mode') === '1';
        } catch(e) {}
        document.write(
          '<style>' +
          (isDark
            ? '#start-screen { background: #181c20 !important; color: #e0e0e0 !important; }'
            : '#start-screen { background: #fff !important; color: #222 !important; }'
          ) +
          '</style>'
        );
      })();
    </script>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div id="start-screen">
      <div class="start-title" id="typewriter-title">欢迎来到栖迟之墟</div>
      <div class="start-subtitle" id="typewriter-subtitle">「衡门之下，可以栖迟」</div>
      <div class="start-bottom">
        <div class="start-welcome">在文字与光影中，遇见生活的另一种可能。</div>
        <div class="start-author">作者：轻风</div>
      </div>
    </div>
    <div class="game-container">
        <!-- 顶部信息栏 -->
        <header class="top-bar">
            <div class="game-title">栖迟之墟</div>
            <div class="resource-display">
                <div class="resource" id="coins">
                    <span class="resource-label">金币</span>
                    <span class="resource-value">0.0</span>
                </div>
                <div class="resource" id="reputation">
                    <span class="resource-label">声望</span>
                    <span class="resource-value">0.0</span>
                </div>
                <div class="resource" id="day-count">
                    <span class="resource-value">第1天</span>
                </div>
            </div>
            <div class="settings-button">设置</div>
        </header>

        <div class="main-content">
            <!-- 左侧资源面板 -->
            <div class="left-panel panel">
                <div class="panel-header">
                    <h3>资源中心</h3>
                </div>
                <div class="panel-content">
                    <div class="section two-column" id="resources-container">
                        <div class="col" id="resources-col-1"></div>
                        <div class="col" id="resources-col-2"></div>
                    </div>
                    <div class="feedback-area" id="feedback-area">
                        <!-- 动态反馈会出现在这里，如 "+5 🌾" -->
                    </div>
                </div>
            </div>

            <!-- 中部操作面板 -->
            <div class="center-panel panel">
                <div class="panel-header">
                    <h3>操作面板</h3>
                </div>
                <div class="panel-content">
                    <div class="section two-column" id="action-buttons">
                        <div class="col" id="action-col-1"></div>
                        <div class="col" id="action-col-2"></div>
                    </div>
                </div>
            </div>
            
            <!-- 新增：交易市场面板 -->
            <div class="market-panel panel">
                <div class="panel-header">
                    <h3>交易市场</h3>
                </div>
                <div class="panel-content">
                    <div id="market-container">
                        <!-- 交易市场内容将在这里渲染 -->
                    </div>
                </div>
            </div>
            
            <!-- 右侧消息面板 -->
            <div class="right-panel panel message-panel">
                <div class="panel-header">
                    <h3>消息日志</h3>
                </div>
                <div class="panel-content">
                    <!-- 游戏消息区 -->
                    <div class="message-area" id="message-area">
                        <p>🎉 欢迎来到栖迟之墟 🎉</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 底部状态栏 -->
        <footer class="bottom-bar">
        </footer>

    </div>

    <!-- 弹窗模板 -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2 id="modal-title">标题</h2>
            <div id="modal-body">内容将在这里显示</div>
            <div id="modal-buttons">
                <!-- 动态添加按钮 -->
            </div>
        </div>
    </div>

    <!-- 全局UI层 - 用于显示各种弹窗、动效和全局交互元素 -->
    <div id="global-ui-layer" class="global-ui-layer">
        <div id="notifications-container" class="notifications-container"></div>
        <div id="animations-container" class="animations-container"></div>
    </div>

    <!-- JavaScript 文件 -->
    <script type="module" src="main.js"></script>
</body>
</html>